import{d as z,m as $,u as q,H as F,g as f,a as k,z as B,y as S,e as m,s as Y,w as H,v as X,t as _,o as R,_ as I,k as A,c as N,F as j,q as G,n as E,T as J}from"./index-T2IhhDmu.js";const K=z({__name:"Range",props:$({min:{default:0},max:{default:100},step:{default:1},r:{default:20},height:{default:4},bgColor:{default:"#ddd"},activeColor:{default:"#000"},color:{default:"#000"},sliderThumbColor:{default:"#000"},tooltipColor:{default:"#fff"},tooltipBorderColor:{default:"#ddd"},value:{},format:{},alwayShowTooltip:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:$(["change","input"],["update:modelValue"]),setup(D,{emit:u}){const s=q(D,"modelValue"),c=u,v=D,a=F("lineRef"),l=f(0),T=f(!0),p=f(!0),h=f(0),b=f(0),C=f(!1);function V(){const{format:e}=v,t=T.value?b.value:h.value;return e?e(t):t}function L(){const{max:e,value:t}=v;let o=0;return t?(b.value=t,o=t/e):typeof s.value=="number"&&(b.value=s.value,o=s.value),a.value?a.value.getBoundingClientRect().width*o:0}let r=0;function n(){v.value!==0&&(r=L()),p.value=!1,T.value=!1,C.value=!0;const{step:e,min:t,max:o}=v;if(!a.value)return 0;r&&(l.value=r);const g=y=>{let i=y instanceof MouseEvent?y.clientX:y.changedTouches[0].clientX;if(!a.value)return;const x=a.value.getBoundingClientRect();if(typeof e!="number")l.value=i-x.left,l.value=Math.max(0,Math.min(l.value,x.width));else{let w=(i-x.left)/x.width;w=Math.max(0,Math.min(w,1)),w=w*(o-t)+t,w=Math.round(w/e)*e,w=Math.max(t,Math.min(w,o));let P=(w-t)/(o-t);l.value=P*x.width}h.value=l.value/x.width*o,typeof s.value=="number"&&(s.value=h.value),c("input",h.value)},d=()=>{a.value&&(c("change",h.value),typeof s.value=="number"&&(s.value=h.value),r=l.value,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",d),C.value=!1,T.value=!0,p.value=!0)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",d),document.addEventListener("touchmove",g),document.addEventListener("touchend",d)}function M(e){const{clientX:t}=e;if(!a.value)return;const o=a.value.getBoundingClientRect(),{step:g,min:d,max:y}=v;if(typeof g!="number")l.value=t-o.left,l.value=Math.max(0,Math.min(l.value,o.width));else{let i=(t-o.left)/o.width;i=Math.max(0,Math.min(i,1)),i=i*(y-d)+d,i=Math.round(i/g)*g,i=Math.max(d,Math.min(i,y));let x=(i-d)/(y-d);l.value=x*o.width}typeof s.value=="number"&&(s.value=l.value/o.width*y),c("change",l.value/o.width*y)}return(e,t)=>(R(),k("div",{onClick:M,ref:"rangeRef",onDragstart:t[2]||(t[2]=S(()=>{},["prevent"])),class:"range",style:B({"--r":e.r+"px","--height":e.height+"px","--bg-color":e.bgColor,"--active-color":e.activeColor,"--color":e.color,"--sliderThumb-color":e.sliderThumbColor,"--tooltip-color":e.tooltipColor,"--tooltip-border-color":e.tooltipBorderColor})},[m("div",{class:Y([{"active-transition":p.value},"slider-thumb"]),onDragstartPassive:t[0]||(t[0]=S(()=>{},["prevent"])),onTouchstartPassive:n,onMousedown:n,style:B({transform:`translateX(${T.value?L():l.value}px)`})},[H(m("div",{class:"tooltip"},_(V()),513),[[X,e.alwayShowTooltip||C.value]])],38),m("div",{onDragstart:t[1]||(t[1]=S(()=>{},["prevent"])),ref_key:"lineRef",ref:a,class:"line"},[m("div",{class:"line-hide",style:B({transform:`translateX(${T.value?L():l.value}px)`})},null,4)],544)],36))}}),W=I(K,[["__scopeId","data-v-7e329d4b"]]),O={class:"df-c-c empty-lrc"},Q=z({__name:"LryricBox",setup(D){const u=A(),s=F("lyricRef"),c=f(!1),v=f(0),a=f(0);function l(){if(c.value)return a.value;if(!u.hasLrc||!s.value)return 0;const r=s.value.getBoundingClientRect().height;v.value=r/u.getLrcTotal;const{index:n}=u.activeLrc;return a.value=-v.value*n-v.value/2,a.value}function T(r,n){if(c.value)return!1;const{texts:M,index:e}=u.activeLrc;return e===n&&M.some(t=>t===r)}let p=0;const h=f("00:00");let b=0;function C(){const r=Math.abs(a.value)/v.value,n=Math.min(u.getLrcTotal-1,Math.max(0,Math.ceil(r)));b=u.lrc[n].time,h.value=u.timeFormat(b)}function V(r){c.value=!0;const n=r.clientY,M=a.value;clearTimeout(p),C(),document.onmousemove=e=>{a.value=M+(e.clientY-n),C()},document.onmouseup=e=>{e.preventDefault(),p=setTimeout(()=>{c.value=!1,p&&(clearTimeout(p),p=0)},3e3),document.onmousemove=null,document.onmouseup=null}}function L(){u.audio.currentTime=b,c.value=!1}return(r,n)=>(R(),k("div",{class:"lyric",onMousedown:S(V,["prevent"])},[H(m("section",{class:Y([{"lyric-container-animate":c.value},"lyric-container"]),ref_key:"lyricRef",ref:s,style:B({transform:`translateY(${l()}px)`})},[(R(!0),k(j,null,G(E(u).lrc,(M,e)=>(R(),k("p",{class:Y({"lyric-active":T(M.text,e)})},_(M.text),3))),256))],6),[[X,E(u).hasLrc]]),H(m("div",O,n[0]||(n[0]=[m("p",null,"暂无歌词",-1)]),512),[[X,!E(u).hasLrc]]),(R(),N(J,{to:".music-lyric"},[H(m("div",{class:"middle-line",style:B({height:v.value+"px"})},[m("button",{onClick:L,class:"button"},"开始"),n[1]||(n[1]=m("div",null,null,-1)),m("span",null,_(h.value),1)],4),[[X,E(u).hasLrc&&c.value]])]))],32))}}),Z=I(Q,[["__scopeId","data-v-bfaa11ae"]]);export{Z as L,W as R};
