import{d as z,m as $,u as q,H as F,g as f,a as E,z as R,y as S,e as c,s as _,w as k,v as H,t as Y,o as X,_ as I,k as A,F as N,q as j,n as B}from"./index-Ci2JYw42.js";const G=z({__name:"Range",props:$({min:{default:0},max:{default:100},step:{default:1},r:{default:20},height:{default:4},bgColor:{default:"#ddd"},activeColor:{default:"#000"},color:{default:"#000"},sliderThumbColor:{default:"#000"},tooltipColor:{default:"#fff"},tooltipBorderColor:{default:"#ddd"},value:{},format:{},alwayShowTooltip:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:$(["change","input"],["update:modelValue"]),setup(D,{emit:u}){const s=q(D,"modelValue"),v=u,d=D,o=F("lineRef"),l=f(0),b=f(!0),p=f(!0),h=f(0),C=f(0),L=f(!1);function V(){const{format:e}=d,t=b.value?C.value:h.value;return e?e(t):t}function T(){const{max:e,value:t}=d;let a=0;return t?(C.value=t,a=t/e):typeof s.value=="number"&&(C.value=s.value,a=s.value),o.value?o.value.getBoundingClientRect().width*a:0}let i=0;function n(){d.value!==0&&(i=T()),p.value=!1,b.value=!1,L.value=!0;const{step:e,min:t,max:a}=d;if(!o.value)return 0;i&&(l.value=i);const g=y=>{let r=y instanceof MouseEvent?y.clientX:y.changedTouches[0].clientX;if(!o.value)return;const x=o.value.getBoundingClientRect();if(typeof e!="number")l.value=r-x.left,l.value=Math.max(0,Math.min(l.value,x.width));else{let w=(r-x.left)/x.width;w=Math.max(0,Math.min(w,1)),w=w*(a-t)+t,w=Math.round(w/e)*e,w=Math.max(t,Math.min(w,a));let P=(w-t)/(a-t);l.value=P*x.width}h.value=l.value/x.width*a,typeof s.value=="number"&&(s.value=h.value),v("input",h.value)},m=()=>{o.value&&(v("change",h.value),typeof s.value=="number"&&(s.value=h.value),i=l.value,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",m),L.value=!1,b.value=!0,p.value=!0)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",g),document.addEventListener("touchend",m)}function M(e){const{clientX:t}=e;if(!o.value)return;const a=o.value.getBoundingClientRect(),{step:g,min:m,max:y}=d;if(typeof g!="number")l.value=t-a.left,l.value=Math.max(0,Math.min(l.value,a.width));else{let r=(t-a.left)/a.width;r=Math.max(0,Math.min(r,1)),r=r*(y-m)+m,r=Math.round(r/g)*g,r=Math.max(m,Math.min(r,y));let x=(r-m)/(y-m);l.value=x*a.width}typeof s.value=="number"&&(s.value=l.value/a.width*y),v("change",l.value/a.width*y)}return(e,t)=>(X(),E("div",{onClick:M,ref:"rangeRef",onDragstart:t[2]||(t[2]=S(()=>{},["prevent"])),class:"range",style:R({"--r":e.r+"px","--height":e.height+"px","--bg-color":e.bgColor,"--active-color":e.activeColor,"--color":e.color,"--sliderThumb-color":e.sliderThumbColor,"--tooltip-color":e.tooltipColor,"--tooltip-border-color":e.tooltipBorderColor})},[c("div",{class:_([{"active-transition":p.value},"slider-thumb"]),onDragstartPassive:t[0]||(t[0]=S(()=>{},["prevent"])),onTouchstartPassive:n,onMousedown:n,style:R({transform:`translateX(${b.value?T():l.value}px)`})},[k(c("div",{class:"tooltip"},Y(V()),513),[[H,e.alwayShowTooltip||L.value]])],38),c("div",{onDragstart:t[1]||(t[1]=S(()=>{},["prevent"])),ref_key:"lineRef",ref:o,class:"line"},[c("div",{class:"line-hide",style:R({transform:`translateX(${b.value?T():l.value}px)`})},null,4)],544)],36))}}),U=I(G,[["__scopeId","data-v-7e329d4b"]]),J={class:"music-lyric"},K={class:"df-c-c empty-lrc"},O=z({__name:"LryricBox",setup(D){const u=A(),s=F("lyricRef"),v=f(!1),d=f(0),o=f(0);function l(){if(v.value)return o.value;if(!u.hasLrc||!s.value)return 0;const i=s.value.getBoundingClientRect().height;d.value=i/u.getLrcTotal;const{index:n}=u.activeLrc;return o.value=-d.value*n-d.value/2,o.value}function b(i,n){if(v.value)return!1;const{texts:M,index:e}=u.activeLrc;return e===n&&M.some(t=>t===i)}let p=0;const h=f("00:00");let C=0;function L(){const i=Math.abs(o.value)/d.value,n=Math.min(u.getLrcTotal-1,Math.max(0,Math.ceil(i)));C=u.lrc[n].time,h.value=u.timeFormat(C)}function V(i){v.value=!0;const n=i.clientY,M=o.value;clearTimeout(p),L(),document.onmousemove=e=>{o.value=M+(e.clientY-n),L()},document.onmouseup=e=>{e.preventDefault(),p=setTimeout(()=>{v.value=!1,p&&(clearTimeout(p),p=0)},3e3),document.onmousemove=null,document.onmouseup=null}}function T(){u.audio.currentTime=C,v.value=!1}return(i,n)=>(X(),E("div",J,[c("div",{class:"lyric",onMousedown:S(V,["prevent"])},[k(c("section",{class:_([{"lyric-container-animate":v.value},"lyric-container"]),ref_key:"lyricRef",ref:s,style:R({transform:`translateY(${l()}px)`})},[(X(!0),E(N,null,j(B(u).lrc,(M,e)=>(X(),E("p",{class:_({"lyric-active":b(M.text,e)})},Y(M.text),3))),256))],6),[[H,B(u).hasLrc]]),k(c("div",K,n[0]||(n[0]=[c("p",null,"暂无歌词",-1)]),512),[[H,!B(u).hasLrc]])],32),k(c("div",{class:"middle-line",style:R({height:d.value+"px"})},[c("button",{onClick:T,class:"button"},"开始"),n[1]||(n[1]=c("div",null,null,-1)),c("span",null,Y(h.value),1)],4),[[H,B(u).hasLrc&&v.value]])]))}}),W=I(O,[["__scopeId","data-v-223b4b6d"]]);export{W as L,U as R};
