import{d as M,u as $,r as g,a as I,b as S,c as f,o as v,w as k,n as h,e as s,f as m,g as b,T as D,h as V,i as e,v as p,j as z,F as j,k as B,t as y,l as A,_ as w,m as U,p as O,q as E,s as N,x as P,y as q,z as X,A as Y}from"./index-DJEm5-U9.js";import{R as T}from"./Range-Ddk_2TWd.js";const G={class:"header"},J={class:"menu-container"},K={class:"list"},Q=["onClick"],W={href:"javascript:;"},Z=M({__name:"FirstMusicList",props:["lessthen1024"],setup(C){const t=C,l=$(),a=g(!1),L=I(),o=g(!1),r=S("mainRef");function F(){l.audio.pause(),l.destory(),l.clear(),l.$reset(),l.init()}function R(c){l.playHandle(c),t.lessthen1024&&L.push("/music/musicLayoutView")}function _(c){if(!c.dataTransfer)return;const n=c.dataTransfer.items,u=new RegExp("audio","ig"),i=[];for(let d=0;d<n.length;d++)if(n[d].kind==="file"&&u.test(n[d].type)){const H=n[d].getAsFile();if(!H)return;i.push(H)}l.list=l.add(i,l.list),a.value=!1}function x(){o.value=!o.value}return(c,n)=>(v(),f("section",{class:h([{"drag-active":a.value},"music-list"]),onDragleave:n[3]||(n[3]=k(u=>a.value=!1,["prevent"])),onDragover:n[4]||(n[4]=k(u=>a.value=!0,["prevent"])),onDrop:k(_,["prevent"])},[s("header",G,[s("div",J,[s("button",{onClick:x,class:"button clear-input menu"},"···"),b(D,{name:"menu"},{default:V(()=>[m(s("ul",{onClick:x,class:"list menu-list"},[s("li",{onClick:F},n[5]||(n[5]=[s("a",{href:"javascript:;"},"清除列表",-1)])),m(s("li",{onClick:n[0]||(n[0]=(...u)=>e(l).addList&&e(l).addList(...u))},n[6]||(n[6]=[s("a",{href:"javascript:;"},"添加音频文件",-1)]),512),[[p,C.lessthen1024]])],512),[[p,o.value]])]),_:1}),m(s("div",{onClick:x,class:"modal"},null,512),[[p,o.value]])]),m(s("input",{placeholder:"搜 索",class:"input","onUpdate:modelValue":n[1]||(n[1]=u=>e(l).keyword=u),type:"text"},null,512),[[z,e(l).keyword,void 0,{lazy:!0}]]),s("button",{onClick:n[2]||(n[2]=u=>e(l).keyword=""),class:"button clear-input"},"X")]),s("main",{ref_key:"mainRef",ref:r},[s("ul",K,[(v(!0),f(j,null,B(e(l).filterList,(u,i)=>(v(),f("li",{key:u.name,class:h({"list-li-active":e(l).currentIndex===i}),onClick:d=>R(u)},[s("a",W,y(e(A)(u.name)),1)],10,Q))),128))])],512)],34))}}),tt=w(Z,[["__scopeId","data-v-6f0bb31f"]]),et={class:"menu-container lrc-menu"},st={class:"lyric-box"},nt={class:"df-c-c empty-lrc"},ot={class:"empty"},rt=M({__name:"FirstMusicLyric",setup(C){const t=$(),l=g(!1),a=S("lyricRef"),L=g(0),o=g(!1),r=U(()=>t.hasLrc?L.value/t.getLrcTotal:0);function F(c){if(!c.dataTransfer)return;const n=c.dataTransfer.items,u=[];for(let i=0;i<n.length;i++){const d=n[i].getAsFile();d&&P(d.name).toLowerCase()==="lrc"&&u.push(d)}t.lrcList=t.addLrc(t.lrcList,u),l.value=!1}O(()=>{if(t.hasLrc){if(!a.value)return;L.value=a.value.getBoundingClientRect().height}});function R(){if(!t.hasLrc)return 0;const{index:c}=t.activeLrc;return-r.value*c-r.value/2}function _(){o.value=!o.value}function x(){t.lrcList.clear()}return(c,n)=>{const u=E("active");return v(),f("section",{class:h([{"drag-active":l.value},"music-lyric"]),onDragleave:n[3]||(n[3]=k(i=>l.value=!1,["prevent"])),onDragover:n[4]||(n[4]=k(i=>l.value=!0,["prevent"])),onDrop:k(F,["prevent"])},[s("div",et,[s("button",{onClick:_,class:"button clear-input menu"},"词"),b(D,{name:"menu"},{default:V(()=>[m(s("ul",{onClick:_,class:"list menu-list"},[s("li",{onClick:x},n[5]||(n[5]=[s("a",{href:"javascript:;"},"清除全部歌词",-1)])),s("li",{onClick:n[0]||(n[0]=(...i)=>e(t).addLrcList&&e(t).addLrcList(...i))},n[6]||(n[6]=[s("a",{href:"javascript:;"},"打开文件夹",-1)])),s("li",{style:{display:"none"},onClick:n[1]||(n[1]=(...i)=>e(t).appointFile&&e(t).appointFile(...i))},n[7]||(n[7]=[s("a",{href:"javascript:;"},"打开指定的文件匹配歌曲",-1)]))],512),[[p,o.value]])]),_:1}),m(s("div",{onClick:_,class:"modal"},null,512),[[p,o.value]])]),m(s("div",st,[m((v(),f("div",{ref_key:"lyricRef",ref:a,class:"lyric-container",style:N({transform:`translateY(${R()}px)`})},[(v(!0),f(j,null,B(e(t).lrc,i=>(v(),f("p",null,y(i.text),1))),256))],4)),[[u,{name:"lyric-active",index:e(t).activeLrc.index,count:e(t).activeLrc.texts}],[p,e(t).hasLrc]]),m(s("div",nt,n[8]||(n[8]=[s("p",null,"暂无歌词",-1)]),512),[[p,!e(t).hasLrc]])],512),[[p,e(t).hasLrcListTotal]]),m(s("div",ot,[n[9]||(n[9]=s("p",null,"tip: 添加LRC文件 ",-1)),s("button",{class:"button open-directory",onClick:n[2]||(n[2]=(...i)=>e(t).addLrcList&&e(t).addLrcList(...i))},"打开文件夹")],512),[[p,!e(t).hasLrcListTotal]])],34)}}}),lt=w(rt,[["__scopeId","data-v-9f2ad963"]]),it={class:"music"},at={class:"music-singer"},ut={class:"img"},ct=["src","alt"],dt={class:"music-bottom"},mt={class:"progress-container"},vt={class:"controls"},pt={class:"controls-left"},ft=M({__name:"FirstMusic",setup(C){const t=$(),l=g(!1);let a;return q(()=>{a=new ResizeObserver(L=>{for(const o of L)o.contentRect&&(l.value=o.contentRect.width<1024)}),a.observe(document.body)}),X(()=>{a.unobserve(document.body)}),(L,o)=>(v(),f("div",it,[b(tt,{lessthen1024:l.value},null,8,["lessthen1024"]),b(lt),s("section",at,[s("div",ut,[s("img",{src:e(t).getImageURL,alt:e(t).musicMetadata.artist},null,8,ct)]),s("p",null,y(e(t).musicMetadata.title),1),s("p",null,y(e(t).musicMetadata.artist),1)]),s("footer",dt,[s("div",mt,[s("div",null,y(e(t).timeFormat(e(t).music.currentTime)),1),b(T,{r:14,"active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",format:r=>e(t).timeFormat(r),step:"any",onChange:o[0]||(o[0]=r=>{e(t).progressChange(r)}),class:"progress",value:e(t).music.currentTime,min:0,max:e(t).music.duration},null,8,["format","value","max"]),s("div",null,y(e(t).timeFormat(e(t).music.duration)),1)]),s("div",vt,[s("div",pt,[s("button",{onClick:o[1]||(o[1]=(...r)=>e(t).playBtnHandle&&e(t).playBtnHandle(...r)),class:"button"},y(e(t).playString),1),s("button",{onClick:o[2]||(o[2]=(...r)=>e(t).endedHandle&&e(t).endedHandle(...r)),class:"button"},"上一首"),s("button",{onClick:o[3]||(o[3]=(...r)=>e(t).endedHandle&&e(t).endedHandle(...r)),class:"button"},"下一首"),s("button",{class:h([{"muted-volumn":e(t).isMuted},"button"]),onClick:o[4]||(o[4]=(...r)=>e(t).volumnClick&&e(t).volumnClick(...r))},"音量",2),b(T,{r:14,format:r=>Math.round(+r*100*100)/100+"%","active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",onChange:o[5]||(o[5]=r=>{e(t).volumnChange(r)}),modelValue:e(t).music.volumn,"onUpdate:modelValue":o[6]||(o[6]=r=>e(t).music.volumn=r),min:0,max:1,step:.05},null,8,["format","modelValue"])]),s("div",null,[s("button",{onClick:o[7]||(o[7]=(...r)=>e(t).addList&&e(t).addList(...r)),class:"button"},"打开文件夹"),s("button",{onClick:o[8]||(o[8]=(...r)=>e(t).setPlayOrder&&e(t).setPlayOrder(...r)),class:"button"},y(e(t).OrderString),1)])])])]))}}),yt=w(ft,[["__scopeId","data-v-c77fe118"]]),Lt={key:1,class:"df-c-c empty"},bt=M({__name:"MusicView",setup(C){const t=$();return(l,a)=>e(t).total>0?(v(),Y(yt,{key:0})):(v(),f("div",Lt,[a[1]||(a[1]=s("p",null,"tip: 添加音频文件",-1)),s("button",{class:"empty-button big-btn",onClick:a[0]||(a[0]=()=>e(t).addList())},"打开文件夹")]))}}),Ct=w(bt,[["__scopeId","data-v-6399836c"]]);export{Ct as default};
