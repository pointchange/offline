import{d as H,u as S,r as v,a as I,b as O,c as N,o as P,e as q,f as E,g as X,h as u,i as c,j as o,w as r,k as p,l as _,v as i,T as h,m as Y,n as e,F as x,p as M,q as w,t as a,s as A,_ as T,x as G}from"./index-DEpMV038.js";import{R}from"./Range-gcIQICo3.js";const J={class:"music"},K={class:"music-list"},Q={class:"header"},W={class:"menu-container"},Z={class:"list"},tt=["onClick"],et={href:"javascript:;"},ot={class:"music-lyric"},st={class:"menu-container lrc-menu"},nt={class:"df-c-c"},lt={class:"empty"},rt={class:"music-singer"},it={class:"img"},at=["src","alt"],ct={class:"music-bottom"},ut={class:"progress-container"},dt={class:"controls"},mt={class:"controls-left"},vt=H({__name:"FirstMusic",setup(V){const t=S(),m=v(!1),l=v(!1),C=v(!1),F=I(),f=O("lyricRef"),L=v(0),g=N(()=>t.hasLrc?L.value/t.getLrcTotal:0);function b(){l.value=!l.value}function B(){t.lrcList=[]}function $(){t.audio.pause(),t.destory(),t.clear(),t.$reset(),t.init()}function y(){m.value=!m.value}function j(){if(!t.hasLrc)return 0;const{index:d}=t.activeLrc;return-g.value*d-g.value/2}let k;P(()=>{k=new ResizeObserver(d=>{for(const s of d)s.contentRect&&(C.value=s.contentRect.width<1024)}),k.observe(document.body)}),q(()=>{k.unobserve(document.body)}),E(()=>{if(t.hasLrc){if(!f.value)return;L.value=f.value.getBoundingClientRect().height}});function z(d){t.playHandle(d),C.value&&F.push("/music/musicLayoutView")}return(d,s)=>{const U=X("active");return c(),u("div",J,[o("section",K,[o("header",Q,[o("div",W,[o("button",{onClick:y,class:"button clear-input menu"},"···"),p(h,{name:"menu"},{default:_(()=>[r(o("ul",{onClick:y,class:"list menu-list"},[o("li",{onClick:$},s[14]||(s[14]=[o("a",{href:"javascript:;"},"清除列表",-1)]))],512),[[i,m.value]])]),_:1}),r(o("div",{onClick:y,class:"modal"},null,512),[[i,m.value]])]),r(o("input",{placeholder:"搜 索",class:"input","onUpdate:modelValue":s[0]||(s[0]=n=>e(t).keyword=n),type:"text"},null,512),[[Y,e(t).keyword,void 0,{lazy:!0}]]),o("button",{onClick:s[1]||(s[1]=n=>e(t).keyword=""),class:"button clear-input"},"X")]),o("main",null,[o("ul",Z,[(c(!0),u(x,null,M(e(t).filterList,(n,D)=>(c(),u("li",{key:n.name,class:w({"list-li-active":e(t).currentIndex===D}),onClick:yt=>z(n)},[o("a",et,a(e(t).DeleteFileSuffix(n.name)),1)],10,tt))),128))])])]),o("section",ot,[o("div",st,[o("button",{onClick:b,class:"button clear-input menu"},"词"),p(h,{name:"menu"},{default:_(()=>[r(o("ul",{onClick:b,class:"list menu-list"},[o("li",{onClick:B},s[15]||(s[15]=[o("a",{href:"javascript:;"},"清除全部歌词",-1)])),o("li",{onClick:s[2]||(s[2]=(...n)=>e(t).addLrc&&e(t).addLrc(...n))},s[16]||(s[16]=[o("a",{href:"javascript:;"},"打开文件夹",-1)]))],512),[[i,l.value]])]),_:1}),r(o("div",{onClick:b,class:"modal"},null,512),[[i,l.value]])]),r(o("div",null,[r((c(),u("div",{ref_key:"lyricRef",ref:f,class:"lyric-container",style:A({transform:`translateY(${j()}px)`})},[(c(!0),u(x,null,M(e(t).lrc,n=>(c(),u("p",null,a(n.text),1))),256))],4)),[[U,{name:"lyric-active",index:e(t).activeLrc.index,count:e(t).activeLrc.texts}],[i,e(t).hasLrc]]),r(o("div",nt,s[17]||(s[17]=[o("p",null,"暂无歌词",-1)]),512),[[i,!e(t).hasLrc]])],512),[[i,e(t).hasLrcListTotal]]),r(o("div",lt,[s[18]||(s[18]=o("p",null,"tip: 添加LRC文件 ",-1)),o("button",{class:"button open-directory",onClick:s[3]||(s[3]=(...n)=>e(t).addLrc&&e(t).addLrc(...n))},"打开文件夹")],512),[[i,!e(t).hasLrcListTotal]]),o("button",{style:{position:"fixed",top:"0","z-index":"10"},class:"button",onClick:s[4]||(s[4]=()=>e(t).lrc=[])},"清空lrc")]),o("section",rt,[o("div",it,[o("img",{src:e(t).getImageURL,alt:e(t).musicMetadata.artist},null,8,at)]),o("p",null,a(e(t).musicMetadata.title),1),o("p",null,a(e(t).musicMetadata.artist),1)]),o("footer",ct,[o("div",ut,[o("div",null,a(e(t).timeFormat(e(t).music.currentTime)),1),p(R,{r:14,"active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",format:n=>e(t).timeFormat(n),step:"any",onChange:s[5]||(s[5]=n=>{e(t).progressChange(n)}),class:"progress",value:e(t).music.currentTime,min:0,max:e(t).music.duration},null,8,["format","value","max"]),o("div",null,a(e(t).timeFormat(e(t).music.duration)),1)]),o("div",dt,[o("div",mt,[o("button",{onClick:s[6]||(s[6]=(...n)=>e(t).playBtnHandle&&e(t).playBtnHandle(...n)),class:"button"},a(e(t).playString),1),o("button",{onClick:s[7]||(s[7]=(...n)=>e(t).endedHandle&&e(t).endedHandle(...n)),class:"button"},"上一首"),o("button",{onClick:s[8]||(s[8]=(...n)=>e(t).endedHandle&&e(t).endedHandle(...n)),class:"button"},"下一首"),o("button",{class:w([{"muted-volumn":e(t).isMuted},"button"]),onClick:s[9]||(s[9]=(...n)=>e(t).volumnClick&&e(t).volumnClick(...n))},"音量",2),p(R,{r:14,format:n=>Math.round(+n*100*100)/100+"%","active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",onChange:s[10]||(s[10]=n=>{e(t).volumnChange(n)}),modelValue:e(t).music.volumn,"onUpdate:modelValue":s[11]||(s[11]=n=>e(t).music.volumn=n),min:0,max:1,step:.05},null,8,["format","modelValue"])]),o("div",null,[o("button",{onClick:s[12]||(s[12]=(...n)=>e(t).addList&&e(t).addList(...n)),class:"button"},"打开文件夹"),o("button",{onClick:s[13]||(s[13]=(...n)=>e(t).setPlayOrder&&e(t).setPlayOrder(...n)),class:"button"},a(e(t).OrderString),1)])])])])}}}),pt=T(vt,[["__scopeId","data-v-385b5a08"]]),ft={key:1,class:"df-c-c empty"},bt=H({__name:"MusicView",setup(V){const t=S();return(m,l)=>e(t).total>0?(c(),G(pt,{key:0})):(c(),u("div",ft,[l[1]||(l[1]=o("p",null,"tip: 添加音频文件",-1)),o("button",{class:"empty-button big-btn",onClick:l[0]||(l[0]=()=>e(t).addList())},"打开文件夹")]))}}),Lt=T(bt,[["__scopeId","data-v-b85b47e5"]]);export{Lt as default};
