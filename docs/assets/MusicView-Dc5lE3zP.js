import{d as h,m as P,u as X,c as z,o as m,T as G,a as f,b as J,e,r as F,t as g,f as H,_ as w,g as L,h as _,w as $,i as K,j as k,v as V,k as S,l as Q,F as T,n as s,p as W,q as A,s as D,x as U,y,z as Y,A as Z,B as O,C as tt,D as et,E as st}from"./index-Ci2JYw42.js";import{L as ot,R as B}from"./LryricBox-CO7fV3RS.js";const nt={key:0,class:"dialog"},lt={class:"card"},at=h({__name:"Dialog",props:P({cancel:{default:"取消"},confirm:{default:"确认"},cancelHandle:{},confirmHandle:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(b){const t=X(b,"modelValue"),l=b;function a(){t.value=!t.value}function c(){l.cancelHandle&&l.cancelHandle(),a()}function o(){l.confirmHandle&&l.confirmHandle(),a()}return(n,u)=>(m(),z(G,{to:"body"},[t.value?(m(),f("div",nt,[e("div",{onClick:a,class:"modal"}),e("div",lt,[e("header",null,[F(n.$slots,"header",{},()=>[u[0]||(u[0]=H("Title"))])]),e("main",null,[F(n.$slots,"main",{},void 0)]),e("footer",null,[e("button",{class:"button",onClick:c},g(n.cancel),1),e("button",{class:"button",onClick:o},g(n.confirm),1)])])])):J("",!0)]))}}),E=w(at,[["__scopeId","data-v-1b171615"]]),it={class:"menu-container"},rt=h({__name:"Menu",setup(b){const t=L(!1);function l(){t.value=!t.value}return(a,c)=>(m(),f("div",it,[e("div",{onClick:l},[F(a.$slots,"button",{},void 0)]),_(K,{name:"menu"},{default:k(()=>[$(e("div",{onClick:l,class:"menu-list"},[F(a.$slots,"content",{},void 0,!0)],512),[[V,t.value]])]),_:3}),$(e("div",{onClick:l,class:"modal"},null,512),[[V,t.value]])]))}}),N=w(rt,[["__scopeId","data-v-da87f130"]]);function q(b){if(!b.dataTransfer)return;const t=b.dataTransfer.items,l=new RegExp("audio","ig"),a=[];for(let c=0;c<t.length;c++)if(t[c].kind==="file"&&l.test(t[c].type)){const o=t[c].getAsFile();if(!o)return;a.push(o)}return a}const ut={class:"header"},ct={class:"list"},dt=["placeholder"],mt={class:"list"},pt=["onClick"],vt={href:"javascript:;"},ft=h({__name:"FirstMusicList",props:["lessthen1024"],setup(b){const t=b,l=S(),a=L(!1),c=Q(),o=L(!1),n=L(!1);function u(){l.audio.pause(),l.destory(),l.clear(),l.$reset(),l.init()}function C(M){l.playHandle(M),t.lessthen1024&&c.push("/music/musicMobileLayoutView")}function R(M){const i=q(M);i&&(l.list=l.add(i,l.list),a.value=!1)}function I(){o.value=!o.value}return(M,i)=>(m(),f(T,null,[e("section",{class:D([{"drag-active":a.value},"music-list"]),onDragleave:i[4]||(i[4]=y(p=>a.value=!1,["prevent"])),onDragover:i[5]||(i[5]=y(p=>a.value=!0,["prevent"])),onDrop:y(R,["prevent"])},[e("header",ut,[_(N,null,{content:k(()=>[e("ul",ct,[e("li",{onClick:i[0]||(i[0]=p=>n.value=!n.value)},i[7]||(i[7]=[e("a",{href:"javascript:;"},"清除列表",-1)])),$(e("li",{onClick:i[1]||(i[1]=(...p)=>s(l).addList&&s(l).addList(...p))},i[8]||(i[8]=[e("a",{href:"javascript:;"},"添加音频文件",-1)]),512),[[V,b.lessthen1024]])])]),button:k(()=>[e("button",{onClick:I,class:"button clear-input menu"},"···")]),_:1}),$(e("input",{placeholder:`搜 索 ${s(l).total} 首`,class:"input","onUpdate:modelValue":i[2]||(i[2]=p=>s(l).keyword=p),type:"text"},null,8,dt),[[W,s(l).keyword,void 0,{lazy:!0}]]),e("button",{onClick:i[3]||(i[3]=p=>s(l).keyword=""),class:"button clear-input"},"X")]),e("main",null,[e("ul",mt,[(m(!0),f(T,null,A(s(l).filterList,(p,v)=>(m(),f("li",{key:p.name,class:D({"list-li-active":s(l).currentIndex===v}),onClick:r=>C(p)},[e("a",vt,g(s(U)(p.name)),1)],10,pt))),128))])])],34),_(E,{modelValue:n.value,"onUpdate:modelValue":i[6]||(i[6]=p=>n.value=p),"confirm-handle":u},{header:k(()=>i[9]||(i[9]=[H("您确定要清除列表吗？")])),_:1},8,["modelValue"])],64))}}),bt=w(ft,[["__scopeId","data-v-db75aedf"]]),gt=h({__name:"Tag",props:{size:{default:"small"},color:{default:"#000"}},setup(b){return(t,l)=>(m(),f("span",{class:D([[t.size],"tag"]),style:Y({"--color":t.color})},[F(t.$slots,"default",{},void 0)],6))}}),_t=w(gt,[["__scopeId","data-v-9c9caa0a"]]),yt={class:"list"},Ct={key:0,class:"lyric-box"},Lt={class:"list"},kt=["onContextmenu","onClick"],$t={href:"javascript:;"},ht={key:1,class:"empty"},wt={class:"button"},Mt=["accept"],Ht=h({__name:"FirstMusicLyric",setup(b){const t=S(),l=L(!1),a=L(!1),c=L(!1),o=Z({show:!1,content:"您确定要清除列表吗？",confirmHandle:()=>{}}),n=O(()=>t.lrcEncode.map(v=>"."+v).join(","));function u(v){const d=v.target.files;d&&d.length>0&&(t.lrcList=t.addLrc([...d],t.lrcList))}function C(v){if(!v.dataTransfer)return;const r=v.dataTransfer.items,d=[];for(let x=0;x<r.length;x++){const j=r[x].getAsFile();j&&tt(j.name).toLowerCase()==="lrc"&&d.push(j)}t.lrcList=t.addLrc(d,t.lrcList),l.value=!1}function R(){a.value=!a.value}function I(){o.show=!0,o.confirmHandle=()=>{t.lrcList.clear()}}function M(v){o.show=!0,o.content=`您确定要移除" ${v} " ？`,o.confirmHandle=()=>{t.lrcList.delete(v)}}function i(){c.value=!c.value}function p(v){t.appointFile(v),i()}return(v,r)=>(m(),f(T,null,[e("section",{class:D([{"drag-active":l.value},"music-lyric"]),onDragleave:r[2]||(r[2]=y(d=>l.value=!1,["prevent"])),onDragover:r[3]||(r[3]=y(d=>l.value=!0,["prevent"])),onDrop:y(C,["prevent"])},[e("header",null,[_(N,null,{content:k(()=>[e("ul",yt,[e("li",{onClick:I},r[5]||(r[5]=[e("a",{href:"javascript:;"},"清除全部歌词",-1)])),e("li",{onClick:r[0]||(r[0]=(...d)=>s(t).addLrcList&&s(t).addLrcList(...d))},r[6]||(r[6]=[e("a",{href:"javascript:;"},"打开文件夹",-1)]))])]),button:k(()=>[e("button",{onClick:R,class:"button menu"},"···")]),_:1}),$(e("button",{onClick:i,class:"button"},"词",512),[[V,s(t).hasLrcListTotal]])]),s(t).hasLrcListTotal?(m(),f("div",Ct,[$(_(ot,null,null,512),[[V,c.value]]),$(e("ul",Lt,[(m(!0),f(T,null,A(s(t).lrcList,d=>(m(),f("li",{onContextmenu:y(x=>M(d[0]),["right","prevent"]),onClick:x=>p(d[0]),key:d[0]},[e("a",$t,g(s(U)(d[0])),1),_(_t,{size:"small",color:"var(--pc-theme-primary)"},{default:k(()=>r[7]||(r[7]=[H("LRC")])),_:1,__:[7]})],40,kt))),128))],512),[[V,!c.value]])])):(m(),f("div",ht,[r[9]||(r[9]=e("p",null,"tip: 添加LRC文件 ",-1)),e("button",{class:"button",onClick:r[1]||(r[1]=(...d)=>s(t).addLrcList&&s(t).addLrcList(...d))},"打开文件夹"),e("label",wt,[e("input",{onChange:u,multiple:"",type:"file",accept:n.value},null,40,Mt),r[8]||(r[8]=H(" 打开LRC文件 "))])]))],34),_(E,{"confirm-handle":o.confirmHandle,modelValue:o.show,"onUpdate:modelValue":r[4]||(r[4]=d=>o.show=d)},{header:k(()=>[H(g(o.content),1)]),_:1},8,["confirm-handle","modelValue"])],64))}}),Vt=w(Ht,[["__scopeId","data-v-7fdbfd94"]]),Dt={class:"music"},xt={class:"music-singer"},Ft={class:"img"},Tt=["src","alt"],St={class:"title"},Rt={class:"artist"},It={class:"music-bottom"},jt={class:"progress-container"},Bt={class:"controls"},zt={class:"controls-left"},At=h({__name:"FirstMusic",setup(b){const t=S(),l=L(!1);let a;return et(()=>{a=new ResizeObserver(c=>{for(const o of c)o.contentRect&&(l.value=o.contentRect.width<1024)}),a.observe(document.body)}),st(()=>{a.unobserve(document.body)}),(c,o)=>(m(),f("div",Dt,[_(bt,{lessthen1024:l.value},null,8,["lessthen1024"]),_(Vt),e("section",xt,[e("div",Ft,[e("img",{src:s(t).getImageURL,alt:s(t).musicMetadata.artist},null,8,Tt)]),e("p",St,g(s(t).musicMetadata.title),1),e("p",Rt,g(s(t).musicMetadata.artist),1)]),e("footer",It,[e("div",jt,[e("div",null,g(s(t).timeFormat(s(t).music.currentTime)),1),_(B,{r:14,"active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",format:n=>s(t).timeFormat(n),step:"any",onChange:o[0]||(o[0]=n=>{s(t).progressChange(n)}),class:"progress",value:s(t).music.currentTime,min:0,max:s(t).music.duration},null,8,["format","value","max"]),e("div",null,g(s(t).timeFormat(s(t).music.duration)),1)]),e("div",Bt,[e("div",zt,[e("button",{onClick:o[1]||(o[1]=(...n)=>s(t).playBtnHandle&&s(t).playBtnHandle(...n)),class:"button"},g(s(t).playString),1),e("button",{onClick:o[2]||(o[2]=(...n)=>s(t).endedHandle&&s(t).endedHandle(...n)),class:"button"},"上一首"),e("button",{onClick:o[3]||(o[3]=(...n)=>s(t).endedHandle&&s(t).endedHandle(...n)),class:"button"},"下一首"),e("button",{class:D([{"muted-volumn":s(t).isMuted},"button"]),onClick:o[4]||(o[4]=(...n)=>s(t).volumnClick&&s(t).volumnClick(...n))},"音量",2),_(B,{r:14,format:n=>Math.round(+n*100*100)/100+"%","active-color":"var(--pc-theme-primary)","slider-thumb-color":"var(--pc-theme-primary)","bg-color":"var(--pc-border-color)","tooltip-border-color":"var(--pc-border-color)","tooltip-color":"var(--pc-theme-color)",color:"var(--pc-theme-fs-color)",onChange:o[5]||(o[5]=n=>{s(t).volumnChange(n)}),modelValue:s(t).music.volumn,"onUpdate:modelValue":o[6]||(o[6]=n=>s(t).music.volumn=n),min:0,max:1,step:.05},null,8,["format","modelValue"])]),e("div",null,[e("button",{onClick:o[7]||(o[7]=(...n)=>s(t).addList&&s(t).addList(...n)),class:"button"},"打开文件夹"),e("button",{onClick:o[8]||(o[8]=(...n)=>s(t).setPlayOrder&&s(t).setPlayOrder(...n)),class:"button"},g(s(t).OrderString),1)])])])]))}}),Ut=w(At,[["__scopeId","data-v-114a51ea"]]),Ot={key:1,class:"df-c-c empty"},Et={class:"empty-button big-btn"},Nt=["accept"],qt=h({__name:"MusicView",setup(b){const t=S(),l=O(()=>t.encode.map(n=>"."+n).join(", ")),a=L(!1);function c(n){const u=q(n);u&&(t.list=t.add(u,t.list),a.value=!1)}function o(n){const C=n.target.files;C&&C.length>0&&(t.list=t.add([...C],t.list))}return(n,u)=>(m(),f("div",{class:D(["music-view",{"drag-active":a.value}]),onDragleave:u[1]||(u[1]=y(C=>a.value=!1,["prevent"])),onDragover:u[2]||(u[2]=y(C=>a.value=!0,["prevent"])),onDrop:y(c,["prevent"])},[s(t).total>0?(m(),z(Ut,{key:0})):(m(),f("div",Ot,[u[4]||(u[4]=e("p",null,"tip: 添加音频文件",-1)),e("button",{class:"empty-button big-btn",onClick:u[0]||(u[0]=()=>s(t).addList())},"打开文件夹"),e("label",Et,[e("input",{onChange:o,multiple:"",type:"file",accept:l.value},null,40,Nt),u[3]||(u[3]=H(" 打开音频文件 "))])]))],34))}}),Gt=w(qt,[["__scopeId","data-v-aac975d3"]]);export{Gt as default};
